# Webhook implementation details

Users need to add scheduling gates, finalizer, instaslice custom resource and configmap so that Instaslice can work with the existing scheduler to make new slice and pin a pod not only to an node, GPU but also a MIG slice index. Such requirements puts onus on the workload author to add the desired field and also make them unique across the cluster. The pod name, instaslice resource and configmap name has to be unique in the cluster. The uniqueness as a requirement is a barrier to entry and can cause lot of conflicts.

To resolve the above issues we introduce webhook, the webhook looks at pod create requests in the cluster that ask for a MIG partition and mutates the pod to add:
- Finalizer
- Scheduling gates
- Unique InstaSlice extended resource
- Unique configmap name

Changes in CRD:
- New field called ResourceIdentifier which is podname and uuid generated by the webhook.

The ResourceIdentifier field is used both by the controller and the daemonset. The controller sets the field inside the allocation section of InstaSlice spec and the daemonset later consumes it to create the resources. This is needed as daemonset does not operator on pods.
